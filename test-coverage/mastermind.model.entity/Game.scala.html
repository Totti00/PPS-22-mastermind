<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Game.scala</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=2;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jacoco Coverage Report</a> &gt; <a href="index.source.html" class="el_package">mastermind.model.entity</a> &gt; <span class="el_source">Game.scala</span></div><h1>Game.scala</h1><pre class="source lang-java linenums">package mastermind.model.entity

import mastermind.model.GameState
import mastermind.utils.ErrorHandler.*

trait Game:
  /** Board of the game
    * @return
    *   the board of the game
    */
  def board: Board

  /** Set the board with the newBoard
    * @param newBoard
    *   the board to use
    */
  def board_(newBoard: Board): Unit

  /** Code to guess
    * @return
    *   the code to guess
    */
  def code: Code

  /** Reset the game
    * @return
    *   a new game
    */
  def resetGame(): Game

  /** Remaining turns
    * @return
    *   the remaining turns
    */
  def remainingTurns: Int

  /** Current turn
    * @return
    *   the current turn
    */
  def currentTurn: Int

  /** Set the current turn
    */
  def currentTurn_(): Unit

  /** Game state getter
    * @return
    *   the current game state
    */
  def state: GameState

  /** Game state setter
    * @param newState
    *   the new game state
    */
  def state_(newState: GameState): Unit

<span class="nc" id="L59">object Game:</span>
<span class="fc" id="L60">  def apply(field: Board, code: Code, currentTurn: Int): Game = GameImpl(field, code, currentTurn, GameState.InGame)</span>

<span class="pc bnc" id="L62" title="All 38 branches missed.">  private case class GameImpl(</span>
<span class="pc" id="L63">      var board: Board,</span>
<span class="pc" id="L64">      override val code: Code,</span>
<span class="pc" id="L65">      private var _currentTurn: Int,</span>
<span class="pc" id="L66">      private var _state: GameState</span>
  ) extends Game:

<span class="fc" id="L69">    override def resetGame(): Game = Game(Board(board.rows, board.cols), Code(4), 0)</span>

<span class="fc" id="L71">    override def remainingTurns: Int = board.rows - currentTurn</span>

<span class="fc" id="L73">    override def currentTurn: Int = _currentTurn</span>

<span class="fc" id="L75">    override def currentTurn_(): Unit = _currentTurn += 1</span>

    override def board_(newBoard: Board): Unit =
<span class="fc" id="L78">      giveMeEither {</span>
<span class="pc bpc" id="L79" title="1 of 4 branches missed.">        require(newBoard.rows == board.rows &amp;&amp; newBoard.cols == board.cols, &quot;Invalid arguments&quot;)</span>
<span class="fc" id="L80">        this.board = newBoard</span>
<span class="fc" id="L81">      }</span>

<span class="fc" id="L83">    override def state: GameState = _state</span>

<span class="fc" id="L85">    override def state_(newState: GameState): Unit = _state = newState</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>